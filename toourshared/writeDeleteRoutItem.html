<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>
        TO OUR SHARED : ê¸€ ì‘ì„± #ì¼ì°¨
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Mansalva|Nanum+Gothic|Nanum+Myeongjo|Noto+Sans+KR|Lora|East+Sea+Dokdo|Jua&amp;display=swap" rel="stylesheet" />

    <!-- ICON -->
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />

    <!-- summerNote -->
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.11/dist/summernote-bs4.min.css" rel="stylesheet" />

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src='https://www.google.com/recaptcha/api.js'></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=ebcd0c1accbe0ff4bbb47bd777ef2fcf&libraries=service&libraries=services,clusterer,drawing"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bs4-summernote@0.8.10/dist/summernote-bs4.min.js"></script>

    <!--íŒŒì¼ ì—…ë¡œë“œ
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
-->
    <link rel="stylesheet" href="./css/write.css" />
    <style>
/*
        #category {
            //display: flex;
            //flex-direction: column;
            //position: sticky;
            //top: 10px;
            //left: 10px;
            //border-radius: 5px;
            //border: 1px solid #909090;
            //box-shadow: 0 1px 1px rgba(0, 0, 0, 0.4);
            //background: #fff;
            overflow: hidden;
            z-index: 100;
        }



        #category a {
            float: left;
            list-style: none;
            width: 100%;
            //border-right: 1px solid #acacac;
            padding: 6px 0px;
            text-align: center;
            cursor: pointer;
        }

        #category a.on {
            background: #eee;
        }

        #category a:hover {
            background: #ffe6e6;
            border-left: 1px solid #acacac;
            margin-left: -1px;
        }

        #category a:last-child {
            margin-right: 0;
            border-right: 0;
        }

        #category a span {
            font-size: 11px;
            display: block;
            margin: 0 auto 3px;
            width: 100%;
            height: 28px;
        }
        
*/
    </style>


    <script>
        /* scrollí•  ë•Œ ë°œìƒí•  ì´ë²¤íŠ¸ */
        window.onscroll = function() {
            scrollFunction();
        }

        function scrollFunction() {
            var nav = $("nav");
            var v_scroll = $(window).scrollTop();

            if (v_scroll >= 20) {
                document.getElementById("nav").style.background = "rgba(249, 192, 12, 0.95)";
            } else if (v_scroll <= 0) {
                document.getElementById("nav").style.background = "";
            }
        }

        /* TextArea Summernote */
        $(document).ready(function() {
            $('#article').summernote({
                height: 600, //set editable area's height
            });
        });
    </script>
</head>

<body>
    <form method="post" action="./write.aspx" id="form1">

        <!-- navbar ì˜ì—­ -->
        <div id="nav" class="topnav">
            <ul class="topnavUl">
                <li class="topnavLi">
                    <div class="nav-logo">
                        <a href="index.aspx" class="nav-logo-item">To Our Shared</a>
                    </div>
                </li>
                <li class="topnavLi">
                    <a>Intro</a>
                    <ul>
                        <li><a href="#">TOUPLE</a></li>
                    </ul>
                </li>
                <li class="topnavLi">
                    <a>Shared</a>
                    <ul>
                        <li><a href="search.aspx">ê²€ìƒ‰</a></li>
                    </ul>
                </li>
                <li class="topnavLi">
                    <a>Event</a>
                    <ul>
                        <li><a>ì§„í–‰ì¤‘ì¸ ì´ë²¤íŠ¸</a></li>
                        <li><a>ì¢…ë£Œëœ ì´ë²¤íŠ¸</a></li>
                    </ul>
                </li>
                <li class="topnavLi">
                    <a>Help</a>
                    <ul>
                        <li><a href="FAQ.aspx">ìì£¼ ì°¾ëŠ” ì§ˆë¬¸</a></li>
                    </ul>
                </li>

                <li class="topnavLi">
                    <a href="#">GM</a>
                    <ul>
                        <li>
                            <input type="submit" name="btnMypage" value="ë§ˆì´í˜ì´ì§€" id="btnMypage" /></li>
                        <li>
                            <input type="submit" name="btnLogout" value="ë¡œê·¸ì•„ì›ƒ" id="btnLogout" /></li>

                    </ul>
                </li>

            </ul>
        </div>
        <div id="main" class="main">
            <!-- ë©”ì¸ ìƒë‹¨ ì˜ì—­ -->
            <div class="TitleArea">
                <div class="TitleAlign">

                    <input name="title" id="title" type="text" placeholder="ê²Œì‹œê¸€ì˜ ì œëª©ì„ ì •í•´ì£¼ì„¸ìš”." autocomplete="off" />
                </div>
                <div class="TitleSub">
                    <div class="SubItem">
                        <span>
                            1ì¼ ì°¨ ì‘ì„± ì¤‘...
                        </span>
                    </div>
                    <div class="SubItem">
                        <select name="goDay" id="goDay" class="goDay" onchange="gotoDay()">
                            <option value='1' selected>1 ì¼ì°¨</option>
                        </select>
                    </div>
                    <div class="SubItem">
                        <div class="nextPageBtn">
                            <div onclick="addDay()" class="subAddItem">ì¼ ì¶”ê°€ (+)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì¤‘ì•™ ì˜ì—­ 1 -->
            <div class="MapArea">
                <div id="travelRoute_wrap">
                    <div class="travelRouteItem-Left">
                        <div class="travelRoute-header">
                            <div class="trTitle1"><span class="trTitle">ì—¬í–‰ì§€</span></div>
                            <div class="trTitle2"><span id="trBody">ë°©ë¬¸ : 0</span></div>
                        </div>
                        <div class="travelRoute-content">
                            <ul id="travelRoute" class="travelRoute"></ul>
                        </div>
                    </div>
                    <div class="travelRouteItem-Center">
                        <div class="travelRoute-header">

                            <button type="button" class="TIFIRST" onclick="selectOverlay('MARKER')">
                                <p>ğŸ“Œ</p>
                                <p>ë§ˆì»¤</p>
                            </button>
                            <button type="button" onclick="selectOverlay('POLYLINE')">
                                <p>ğŸ¥–</p>
                                <p>ì„ </p>
                            </button>
                            <button type="button" onclick="selectOverlay('CIRCLE')">
                                <p>ğŸ…</p>
                                <p>ì›</p>
                            </button>
                            <button type="button" onclick="selectOverlay('RECTANGLE')">
                                <p>ğŸ±</p>
                                <p>ì‚¬ê°í˜•</p>
                            </button>
                            <button type="button" onclick="selectOverlay('POLYGON')">
                                <p>ğŸ°</p>
                                <p>ë‹¤ê°í˜•</p>
                            </button>
                            <button type="button" onclick="selectOverlay('ELLIPSE')">
                                <p>ğŸª</p>
                                <p>íƒ€ì›</p>
                            </button>
                            <button type="button" onclick="selectOverlay('ARROW')">
                                <p>ğŸ‘‰</p>
                                <p>í™”ì‚´í‘œ</p>
                            </button>
                            <button type="button" data-toggle="modal" data-target="#searchPlaceModal">
                                <p>ğŸ³</p>
                                <p>ì¥ì†Œê²€ìƒ‰</p>
                            </button>
                            <div class="dropdown">
                                <button class="dropdown-toggle TILAST" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <p>ğŸ³</p>
                                    <p>ì£¼ë³€ê²€ìƒ‰</p>
                                </button>
                                <div id="category" class="dropdown-menu">                                                                     
                                            <a id='MT1' class="dropdown-item" data-order="0">  ëŒ€í˜•ë§ˆíŠ¸</a>
                                            <a id='CS2' class="dropdown-item" data-order="1">  í¸ì˜ì </a>
                                            <a id='PS3' class="dropdown-item" data-order="2">  ì–´ë¦°ì´ì§‘, ìœ ì¹˜ì›</a>
                                            <a id='SC4' class="dropdown-item" data-order="3">  í•™êµ</a>
                                            <a id='AC5' class="dropdown-item" data-order="4">  í•™ì›</a>
                                            <a id='PK6' class="dropdown-item" data-order="5">  ì£¼ì°¨ì¥</a>
                                            <a id='OL7' class="dropdown-item" data-order="6">  ì£¼ìœ ì†Œ, ì¶©ì „ì†Œ</a>
                                            <a id='SW8' class="dropdown-item" data-order="7">  ì§€í•˜ì² ì—­</a>
                                            <a id='BK9' class="dropdown-item" data-order="8">  ì€í–‰</a>
                                            <a id='CT1' class="dropdown-item" data-order="9">  ë¬¸í™”ì‹œì„¤</a>
                                            <a id='AG2' class="dropdown-item" data-order="10"> ì¤‘ê°œì—…ì†Œ</a>
                                            <a id='PO3' class="dropdown-item" data-order="11"> ê³µê³µê¸°ê´€</a>
                                            <a id='AT4' class="dropdown-item" data-order="12"> ê´€ê´‘ëª…ì†Œ</a>
                                            <a id='AD5' class="dropdown-item" data-order="13"> ìˆ™ë°•</a>
                                            <a id='FD6' class="dropdown-item" data-order="14"> ìŒì‹ì </a>
                                            <a id='CE7' class="dropdown-item" data-order="15"> ì¹´í˜</a>
                                            <a id='HP8' class="dropdown-item" data-order="16"> ë³‘ì›</a>
                                            <a id='PM9' class="dropdown-item" data-order="17"> ì•½êµ­</a>                                   
                                </div>
                            </div>


                        </div>
                        <div class="map_wrap">

                            <div id="drawingMap"></div>

                        </div>
                    </div>

                    <div class="travelRouteItem-Right">
                        <div id="travelCost_wrap">
                            <div class="modal-cost">
                                <div class="modal-cost-area">
                                    <div class="cost-header" id="costHeader">
                                        <div class="chTitle1"><span class="chTitle">ì „ì²´ ê²½ë¹„</span></div>
                                        <div class="chTitle2"><span class="chBody">ğŸ’° 0</span></div>
                                    </div>
                                    <div class="cost-body" id="costBody">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì¤‘ì•™ ì˜ì—­ 2 -->
            <div class="taArea">
                <div class="form-group">
                    <textarea name="article" rows="2" cols="20" id="article" type="text" name="article">
</textarea>
                </div>
            </div>

            <!-- ë©”ì¸í˜ì´ì§€ ì˜ì—­ -->
            <div class="mainImgArea">
                <div class="mainImg_wrap">
                    <div class="mainImg_AlignLeft">
                        <div class="mainImg_Label">ê²Œì‹œê¸€ì˜ ë©”ì¸ì´ë¯¸ì§€ë¥¼ ì²¨ë¶€í•˜ì„¸ìš”.</div>
                        <div class="mainImg_Input">
                            <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
                            <input type="file" class="upload" id="FileUpload_main_img" accept="image/*" multiple="false" />
                            <input type="hidden" name="main_img" id="main_img" />


                            <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ -->

                        </div>
                    </div>
                    <div class="mainImg_AlignRight">
                        <!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ë¶€ë¶„-->
                        <img id="mainImgItem" alt="userMainImage" src="./img/noImage.png" />
                        <!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ë¶€ë¶„-->
                    </div>
                </div>
            </div>

            <!-- í•´ì‰¬íƒœê·¸ ì˜ì—­ -->
            <div class="hashArea">
                <input name="hashtag" id="hashtag" type="text" placeholder="í•´ì‰¬íƒœê·¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ex : #ì—¬í–‰ #ì¶”ì–µ) (ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ êµ¬ë¶„ì§€ì–´ ì£¼ì„¸ìš”.)" class="hashAreaItem" />
            </div>

            <!-- í•˜ë‹¨ë¶€ ì˜ì—­ -->
            <div class="btnArea">
                <!-- ì„ì‹œ ì €ì¥ ë²„íŠ¼ -->
                <div class="tempSaveBtn">
                    <div onclick="tmpSave()" class="btnAreaItem">ì„ì‹œ ì €ì¥</div>
                </div>
                <!-- ê¸€ ì‘ì„± ì™„ë£Œ ë²„íŠ¼ -->
                <div class="finishBtn">
                    <div onclick="endWrite()" class="btnAreaItem">ê¸€ ì‘ì„± ì™„ë£Œ</div>
                </div>
            </div>
        </div>

        <!-- ì¥ì†Œ ê²€ìƒ‰ Modal ì˜ì—­ -->
        <div class="modal fade" id="searchPlaceModal" tabindex="-1" role="dialog" aria-labelledby="searchPlaceModalTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered " role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="searchPlaceModalTitle">ì¥ì†Œ ê²€ìƒ‰</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="menu_wrap" class="bg_white">
                            <div class="option">
                                <div>
                                    í‚¤ì›Œë“œ :
                                    <input id="keyword" value="" type="text" onkeyup="searchPlacesByEnter();"/>
                                    <div class="btn btn-secondary" onclick="searchPlaces();">ê²€ìƒ‰í•˜ê¸°</div>
                                </div>
                            </div>
                            <hr />
                            <ul id="placesList"></ul>
                            <div id="pagination"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="btn btn-secondary" data-dismiss="modal">Close</div>
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" name="mapData" id="mapData" />
        <input type="hidden" name="mapRoute" id="mapRoute" />
        <input type="hidden" name="mapCost" id="mapCost" />
        <input type="hidden" name="mapCenter" id="mapCenter" />

    </form>









    <!-- KAKAO 

 <script src="./javascript/write.js"></script>
  
-->
  <script>
      
      

      
      
      //ìœˆë„ìš°ì—ì„œ ì—”í„° ë°±ìŠ¤í˜ì´ìŠ¤ ë§‰ê¸°
      window.onkeydown = function() {
	var kcode = event.keyCode;
	if(window.event.keyCode == 13 || kcode == 116) event.returnValue = false;
    }



         function searchPlacesByEnter(){
             var kcode = event.keyCode;
	if(window.event.keyCode == 13 ){
        searchPlaces();
    }
        
            
            
        }



  </script>
    
    <script>
        //ì´ë¯¸ì§€ ì—…ë¡œë“œ AJAX
        function sendFile(file) {

            var formData = new FormData();
            formData.append('file', $('#FileUpload_main_img')[0].files[0]);
            $.ajax({
                type: 'post',
                url: './imageUploader.ashx',
                data: formData,
                success: function(status) {
                    if (status != 'error') {
                        var my_path = status;
                        $("#mainImgItem").attr("src", my_path);
                        $("#main_img").attr("value", my_path);
                    }
                },
                processData: false,
                contentType: false,
                error: function() {
                    alert("Whoops something went wrong!");
                }
            });
        }

        var _URL = window.URL || window.webkitURL;
        $("#FileUpload_main_img").on('change', function() {

            var file, img;
            if ((file = this.files[0])) {
                img = new Image();
                img.onload = function() {
                    sendFile(file);
                };
                img.onerror = function() {
                    alert("Not a valid file:" + file.type);
                };
                img.src = _URL.createObjectURL(file);
            }

        });
        

    </script>


    <script>
        // Drawing Managerë¡œ ë„í˜•ì„ ê·¸ë¦´ ì§€ë„ div
    var drawingMapContainer = document.getElementById('drawingMap'),
            drawingMap = {
                center: new daum.maps.LatLng(33.450701, 126.570667), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
                level: 3 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
            };
        //í˜„ì¬ ì„ íƒí•œ ì˜¤ë²„ë ˆì´
        var curOverlay = Array(1);
        // ì§€ë„ë¥¼ í‘œì‹œí•  divì™€  ì§€ë„ ì˜µì…˜ìœ¼ë¡œ  ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        //var drawingMap = new daum.maps.Map(drawingMapContainer, mapOption);
        var drawingMap = new daum.maps.Map(drawingMapContainer, drawingMap);

        var options = { // Drawing Managerë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©í•  ì˜µì…˜ì…ë‹ˆë‹¤
            map: drawingMap, // Drawing Managerë¡œ ê·¸ë¦¬ê¸° ìš”ì†Œë¥¼ ê·¸ë¦´ map ê°ì²´ì…ë‹ˆë‹¤
            drawingMode: [ // Drawing Managerë¡œ ì œê³µí•  ê·¸ë¦¬ê¸° ìš”ì†Œ ëª¨ë“œì…ë‹ˆë‹¤
                daum.maps.drawing.OverlayType.ARROW,
                daum.maps.drawing.OverlayType.CIRCLE,
                daum.maps.drawing.OverlayType.ELLIPSE,
                daum.maps.drawing.OverlayType.MARKER,
                daum.maps.drawing.OverlayType.POLYLINE,
                daum.maps.drawing.OverlayType.POLYGON,
                daum.maps.drawing.OverlayType.RECTANGLE
            ],
            // ì‚¬ìš©ìì—ê²Œ ì œê³µí•  ê·¸ë¦¬ê¸° ê°€ì´ë“œ íˆ´íŒì…ë‹ˆë‹¤
            // ì‚¬ìš©ìì—ê²Œ ë„í˜•ì„ ê·¸ë¦´ë•Œ, ë“œë˜ê·¸í• ë•Œ, ìˆ˜ì •í• ë•Œ ê°€ì´ë“œ íˆ´íŒì„ í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
            guideTooltip: ['draw', 'drag', 'edit'],
            arrowOptions: {
                draggable: true,
                removable: true,
                editable: true,
                strokeWeight: 3,
                strokeOpacity: 0.8,
                strokeColor: '#39f',
                strokeStyle: 'solid',
                hintStrokeStyle: 'dashdot',
                hintStrokeOpacity: 0.3,
                startArrow: false
            },
            circleOptions: {
                draggable: true,
                removable: true,
                editable: true,
                strokeColor: '#39f',
                fillColor: '#39f',
                fillOpacity: 0.5
            },
            ellipseOptions: {
                draggable: true,
                removable: true,
                editable: true,
                strokeWeight: 2,
                strokeOpacity: 0.8,
                strokeColor: '#39f',
                strokeStyle: 'solid',
                fillColor: '#39f',
                fillOpacity: 0.3
            },
            markerOptions: { // ë§ˆì»¤ ì˜µì…˜ì…ë‹ˆë‹¤
                draggable: false, // ë§ˆì»¤ë¥¼ ê·¸ë¦¬ê³  ë‚˜ì„œ ë“œë˜ê·¸ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤
                removable: true, // ë§ˆì»¤ë¥¼ ì‚­ì œ í•  ìˆ˜ ìˆë„ë¡ x ë²„íŠ¼ì´ í‘œì‹œë©ë‹ˆë‹¤
                markerImages: [
                    null, // APIì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ ë§ˆì»¤ ì´ë¯¸ì§€
                    {
                        src: 'http://t1.daumcdn.net/localimg/localimages/07/2009/map/icon/ico_mn_13.png',
                        width: 31,
                        height: 35,
                        shape: 'rect',
                        coords: '0,0,31,35',
                        hoverImage: {
                            src: 'http://t1.daumcdn.net/localimg/localimages/07/2012/img/marker_normal.png',
                            width: 33,
                            height: 36,
                            offsetX: 12,
                            offsetY: 36,
                            spriteWidth: 644,
                            spriteHeight: 946,
                            spriteOriginX: 10,
                            spriteOriginY: 10
                        },
                        dragImage: {
                            src: 'http://t1.daumcdn.net/localimg/localimages/07/2012/attach/pc_img/ico_comm.png',
                            width: 20, // ë§ˆì»¤ í¬ê¸°
                            height: 20, // ë§ˆì»¤ í¬ê¸°
                            offsetX: 10, // ì§€ë„ì— ê³ ì •ì‹œí‚¬ ì´ë¯¸ì§€ ë‚´ ìœ„ì¹˜ ì¢Œí‘œ
                            offsetY: 20, // ì§€ë„ì— ê³ ì •ì‹œí‚¬ ì´ë¯¸ì§€ ë‚´ ìœ„ì¹˜ ì¢Œí‘œ
                            spriteWidth: 118, // ì´ë¯¸ì§€ ì „ì²´ í¬ê¸°
                            spriteHeight: 111, // ì´ë¯¸ì§€ ì „ì²´ í¬ê¸°
                            spriteOriginX: 0, // ì´ë¯¸ì§€ ì¤‘ ë§ˆì»¤ë¡œ ì‚¬ìš©í•  ìœ„ì¹˜
                            spriteOriginY: 90 // ì´ë¯¸ì§€ ì¤‘ ë§ˆì»¤ë¡œ ì‚¬ìš©í•  ìœ„ì¹˜
                        }
                    }
                ]
            },
            polylineOptions: { // ì„  ì˜µì…˜ì…ë‹ˆë‹¤
                draggable: true, // ê·¸ë¦° í›„ ë“œë˜ê·¸ê°€ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
                removable: true, // ê·¸ë¦° í›„ ì‚­ì œ í•  ìˆ˜ ìˆë„ë¡ x ë²„íŠ¼ì´ í‘œì‹œë©ë‹ˆë‹¤
                editable: true, // ê·¸ë¦° í›„ ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
                strokeColor: '#39f', // ì„  ìƒ‰
                hintStrokeStyle: 'dash', // ê·¸ë¦¬ì¤‘ ë§ˆìš°ìŠ¤ë¥¼ ë”°ë¼ë‹¤ë‹ˆëŠ” ë³´ì¡°ì„ ì˜ ì„  ìŠ¤íƒ€ì¼
                hintStrokeOpacity: 0.5 // ê·¸ë¦¬ì¤‘ ë§ˆìš°ìŠ¤ë¥¼ ë”°ë¼ë‹¤ë‹ˆëŠ” ë³´ì¡°ì„ ì˜ íˆ¬ëª…ë„
            },
            polygonOptions: {
                draggable: true,
                removable: true,
                editable: true,
                strokeColor: '#39f',
                fillColor: '#39f',
                fillOpacity: 0.5,
                hintStrokeStyle: 'dash',
                hintStrokeOpacity: 0.5
            },
            rectangleOptions: {
                draggable: true,
                removable: false,
                editable: true,
                strokeColor: '#39f', // ì™¸ê³½ì„  ìƒ‰
                fillColor: '#39f', // ì±„ìš°ê¸° ìƒ‰
                fillOpacity: 0.5 // ì±„ìš°ê¸°ìƒ‰ íˆ¬ëª…ë„
            }

        };

        // ìœ„ì— ì‘ì„±í•œ ì˜µì…˜ìœ¼ë¡œ Drawing Managerë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var manager = new daum.maps.drawing.DrawingManager(options);








        // ë²„íŠ¼ í´ë¦­ ì‹œ í˜¸ì¶œë˜ëŠ” í•¸ë“¤ëŸ¬ ì…ë‹ˆë‹¤
        function selectOverlay(type) {
            // ê·¸ë¦¬ê¸° ì¤‘ì´ë©´ ê·¸ë¦¬ê¸°ë¥¼ ì·¨ì†Œí•©ë‹ˆë‹¤
            manager.cancel();

            // í´ë¦­í•œ ê·¸ë¦¬ê¸° ìš”ì†Œ íƒ€ì…ì„ ì„ íƒí•©ë‹ˆë‹¤
            manager.select(daum.maps.drawing.OverlayType[type]);
        }






//        manager.addListener('drawend', function(data) {
//            // data.target ì— ê·¸ë ¤ì§„ ì˜¤ë²„ë ˆì´ ê°ì²´ê°€ ë„˜ì–´ì˜¨ë‹¤.
//            console.info(data.target);
//        });




        // drawManagerì˜ ìƒíƒœê°€ ë³€ê²½ë˜ê³ 
        // travelRouteì™€ ë³€ê²½
        manager.addListener('state_changed', function() {
            closeCusOverlay();
            //console.info(this._historyStroage);
            refreshOverlayListener();


        });
        // e ëŠ” ì‚­ì œë˜ëŠ” ëŒ€ìƒ ì˜¤ë²„ë ˆì´ê°€ ì‚­ì œë ë•Œ listener ì‚­ì œ
        // ëŒ€ìƒì´ ì‚­ì œë˜ë©´ listener ë„ ê°™ì´ ì‚­ì œë¨
        // ì• ì´ˆì— ë¦¬ìŠ¤ë„ˆê°€ ExtenedMarkerì˜ ë¶€ë¶„ ìš”ì†Œë¡œ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì—
        // ê°™ì´ ì‚­ì œë¨
        manager.addListener('remove', function(e) {

        });
        //http://localhost:49862/


        function refreshOverlayListener() {
            var data = manager.getOverlays();
            var overlayType = ["circle", "ellipse", "marker", "polygon", "rectangle"];
            overlayType.forEach(function(overlay, overlayIndex, overlayArray) {
                // ê° ì˜¤ë²„ë ˆì´ë“¤ì€ ê¸¸ì´ê°€ 0ì¸ ë°°ì—´ë¡œ ìµœì´ˆë¶€í„° ì¡´ì œ
                //if (data[overlay] != null) {
                if (data[overlay].length > 0) {
                    //í˜„ì¬ ìƒíƒœì™€ ì´ì „ ìƒíƒœì˜ ì˜¤ë²„ë ˆì´ ê°¯ìˆ˜ê°€ ê°™ë‹¤ë©´ í•´ë‹¹ ë¦¬ìŠ¤íŠ¸ ì „ë¶€ ìƒˆë¡œê³ ì¹¨
                    //console.info(overlay + " : " + data[overlay]._index + "ë¥¼ ìƒˆë¡œ ê³ ì¹¨");
                    data[overlay].forEach(function(value, index, array) {
                        try {
                            //removeListener ì‹œë„
                            // ë¦¬ìŠ¤ë„ˆë¥¼ ë§Œë“œëŠ”ì¤‘ì— ì˜¤ë²„ë ˆì´ë¥¼ ì „ë‹¬
                            kakao.maps.event.removeListener(value, 'click', onClick_overlay);
                        } catch (exception) {
                            //console.info(exception);
                        } finally {
                            kakao.maps.event.addListener(value, 'click', onClick_overlay);
                        }


                    });

                }
            });
        }


        //ì£¼ì†Œ - ì¢Œí‘œê°„ ë³€í™˜ ì„œë¹„ìŠ¤ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
        var geocoder = new kakao.maps.services.Geocoder();

        var customOverlay = new kakao.maps.CustomOverlay({
            xAnchor: 0.5,
            yAnchor: 1.25,
            zIndex: 3
        });

        function closeCusOverlay() {
            customOverlay.setMap(null);
        }




        var curOverlay = Array(1);

        //-----------------------------------------------
        // í´ë¦­ì‹œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸
        //----------------------------------------------
        var onClick_overlay = function() {

            //console.info(overlay.constructor.name + '_' + overlay._index);

            //console.info("onClick_overlay");
            //alert(this._index + "ë²ˆì§¸ ë§ˆì»¤" + "\nk : " + this.k + "\nGa : " + this.k.Ga + "\nHa : " + this.k.Ha + '\nMARKER click!');
            //console.info(this);
            //console.info(overlay);
            //---- ì˜¤ë²„ë ˆì´ íƒ€ì…ë§ˆë‹¤ ì¢Œí‘œê°€ ì¡´ì¬í•˜ëŠ” ìœ„ì¹˜ê°€ ë‹¤ë¦„

            var coord_WCONGNAMUL = getWCONGNAMULFromOverlay(this);
            curOverlay[0] = this;


            //----ì¢Œí‘œê°’ìœ¼ë¡œ ì£¼ì†Œë¥¼ ê°€ì ¸ì˜´
            geocoder.coord2Address(coord_WCONGNAMUL.wcongnamulX, coord_WCONGNAMUL.wcongnamulY, function(result, status) {


                if (status === kakao.maps.services.Status.OK) {
                    //console.info(result);

                    var content = "<div>ok</div>";
                    var keyword = document.getElementById('keyword');



                    //ì£¼ì†Œê°€ ìˆë‹¤ë©´ ê²€ìƒ‰
                    if (result[0].address != null) {
                        if (result[0].address.address_name != null) {
                            //                                keyword.value = result[0].address.address_name;
                            //                                //
                            //                                ps.keywordSearch(keyword.value, placesSearchByStateChange);
                            //                                $('#searchPlaceModal').modal('show');

                            content =


                                '<div class="card card-cus" style="width:300px;">' +
                                '<div class="card-header">' +
                                '<div class="card-title">' +
                                '<input class="form-control card-input" type="text" placeholder="ì¥ì†Œ ì´ë¦„" value="" />' +
                                '</div>' +
                                '<div class="card-close">' +
                                '<div class="closeBtn" onclick="closeCusOverlay()">' +
                                '<span>Ã—</span>' +
                                '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div class="card-body">' +
                                '<blockquote class="blockquote mb-0">';

                            if (result[0].address.address_name != null) {
                                content += '<li class="card-body-li">' + result[0].address.address_name + '</li>';
                            }
                            content +=
                                '<li class="card-body-li"> </li>' +
                                '<li class="card-body-li"> </li>' +
                                '</blockquote>' +
                                '<table style="margin-top: 10px;"><tr>' +
                                '<td>' +
                                '<div class="card-addBtn" onclick=\'pushTravelRouteItem("","","","","","' + coord_WCONGNAMUL.wcongnamulX + '","' + coord_WCONGNAMUL.wcongnamulY + '")\'>ì¶”ê°€</div>' +
                                '</td>' +
                                '<td>';
                            if (result[0].address.address_name != null) {
                                content += '<div class="card-addBtn" onclick=\'searchPlacesByAddress("' + result[0].address.address_name + '")\'>ì£¼ì†Œë¡œ ê²€ìƒ‰</div>'
                            } else {
                                content += '<div class="card-addBtn" onclick=\'searchPlacesByAddress("' + result[0].address.road_address_name + '")\'>ì£¼ì†Œë¡œ ê²€ìƒ‰</div>'
                            }
                            content +=
                                '</td>' +
                                '</tr></table>' +
                                '</div>';


                        }
                    }




                    geocoder.transCoord(coord_WCONGNAMUL.wcongnamulX, coord_WCONGNAMUL.wcongnamulY,
                        function(result, status) {

                            // ì •ìƒì ìœ¼ë¡œ ê²€ìƒ‰ì´ ì™„ë£Œëìœ¼ë©´
                            if (status === kakao.maps.services.Status.OK) {
                                customOverlay.setPosition(new kakao.maps.LatLng(result[0].y, result[0].x));
                                customOverlay.setContent(content);
                                customOverlay.setMap(drawingMap);
                            }
                        }, {
                            input_coord: kakao.maps.services.Coords.WCONGNAMUL, // ë³€í™˜ì„ ìœ„í•´ ì…ë ¥í•œ ì¢Œí‘œê³„ ì…ë‹ˆë‹¤
                            output_coord: kakao.maps.services.Coords.WGS84 // ë³€í™˜ ê²°ê³¼ë¡œ ë°›ì„ ì¢Œí‘œê³„ ì…ë‹ˆë‹¤
                        });

                }
            }, {
                input_coord: kakao.maps.services.Coords.WCONGNAMUL
            });


        }


        function getWCONGNAMULFromOverlay(overlay) {
            var wcongnamulX;
            var wcongnamulY;
            if (overlay.constructor.name == "ExtendsMarker") {
                wcongnamulX = overlay.k.Ga;
                wcongnamulY = overlay.k.Ha;
            } else if (overlay.constructor.name == "ExtendsCircle") {
                wcongnamulX = overlay.k.Ga;
                wcongnamulY = overlay.k.Ha;
            } else if (overlay.constructor.name == "ExtendsRectangle") {
                //ExtendedRectangle has za{ea,ja,ka,la} as coords
                wcongnamulY = (overlay.za.ka + overlay.za.la) / 2;
                wcongnamulX = (overlay.za.ea + overlay.za.ja) / 2;
            } else if (overlay.constructor.name == "ExtendsPolygon") {
                //ExtendedPolygon has ig{0: {ga: ha:}, }
                var gaTotal = 0;
                var haTotal = 0;
                overlay.Ig.forEach(function(value, index, array) {
                    gaTotal += value.Ga;
                    haTotal += value.Ha;
                });
                wcongnamulX = gaTotal / overlay.Ig.length;
                wcongnamulY = haTotal / overlay.Ig.length;
            } else if (overlay.constructor.name == "ExtendsEllipse") {
                wcongnamulX = overlay.k.Ga;
                wcongnamulY = overlay.k.Ha;
            }
            return {
                "wcongnamulX": wcongnamulX,
                "wcongnamulY": wcongnamulY
            };
        }



        // ê²€ìƒ‰ ì‹œìŠ¤í…œ



        var find_AroundMarkers = [];

        //ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰ì‹œ ì§€ë„ì˜ ì¤‘ì‹¬ ì¢Œí‘œë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©
        var ps = new kakao.maps.services.Places(drawingMap);

        // ê²€ìƒ‰ ê²°ê³¼ ëª©ë¡ì´ë‚˜ ë§ˆì»¤ë¥¼ í´ë¦­í–ˆì„ ë•Œ ì¥ì†Œëª…ì„ í‘œì¶œí•  ì¸í¬ìœˆë„ìš°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var infowindow = new kakao.maps.InfoWindow({
            zIndex: 1
        });



        // í‚¤ì›Œë“œ ê²€ìƒ‰ì„ ìš”ì²­í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
        function searchPlaces() {

            var keyword = document.getElementById('keyword').value;

            if (!keyword.replace(/^\s+|\s+$/g, '')) {
                alert('í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return false;
            }

            // ì¥ì†Œê²€ìƒ‰ ê°ì²´ë¥¼ í†µí•´ í‚¤ì›Œë“œë¡œ ì¥ì†Œê²€ìƒ‰ì„ ìš”ì²­í•©ë‹ˆë‹¤
            ps.keywordSearch(keyword, placesSearchCB);
        }
        // ì¥ì†Œê²€ìƒ‰ì´ ì™„ë£Œëì„ ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°±í•¨ìˆ˜ ì…ë‹ˆë‹¤
        function placesSearchCB(data, status, pagination) {
            if (status === kakao.maps.services.Status.OK) {

                // ì •ìƒì ìœ¼ë¡œ ê²€ìƒ‰ì´ ì™„ë£Œëìœ¼ë©´
                // ê²€ìƒ‰ ëª©ë¡ê³¼ ë§ˆì»¤ë¥¼ í‘œì¶œí•©ë‹ˆë‹¤
                displayPlaces(data);

                // í˜ì´ì§€ ë²ˆí˜¸ë¥¼ í‘œì¶œí•©ë‹ˆë‹¤
                displayPagination(pagination);

            } else if (status === kakao.maps.services.Status.ZERO_RESULT) {

                alert('ê²€ìƒ‰ ê²°ê³¼ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;

            } else if (status === kakao.maps.services.Status.ERROR) {

                alert('ê²€ìƒ‰ ê²°ê³¼ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                return;

            }
        }


        // í‚¤ì›Œë“œ(ì£¼ì†Œë¥¼ í†µí•´ì„œ ) ì£¼ë³€ ê²€ìƒ‰ì„ ìš”ì²­í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
        function searchPlacesByAddress(address) {
            //ì£¼ë³€ê²€ìƒ‰ì„ í•˜ë©° í•´ë‹¹ ë§ˆì»¤ëŠ” ì‚­ì œí•©ë‹ˆë‹¤.
            //console.info(curOverlay[0]);
            //manager.remove(curOverlay[0]);


            var keyword = document.getElementById('keyword');
            keyword.value = address;

            if (!keyword.value.replace(/^\s+|\s+$/g, '')) {
                alert('í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return false;
            }

            // ì¥ì†Œê²€ìƒ‰ ê°ì²´ë¥¼ í†µí•´ í‚¤ì›Œë“œë¡œ ì¥ì†Œê²€ìƒ‰ì„ ìš”ì²­í•©ë‹ˆë‹¤
            ps.keywordSearch(keyword.value, placesSearchByAddressCB);
        }

        // í‚¤ì›Œë“œ(ì£¼ì†Œë¥¼ í†µí•´ì„œ ) ì£¼ë³€ ê²€ìƒ‰ì´ ì™„ë£Œë˜ì—ˆì„ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°±í•¨ìˆ˜ ì…ë‹ˆë‹¤
        function placesSearchByAddressCB(data, status, pagination) {
            if (status === kakao.maps.services.Status.OK) {

                manager.remove(curOverlay[0]);
                // ì •ìƒì ìœ¼ë¡œ ê²€ìƒ‰ì´ ì™„ë£Œëìœ¼ë©´
                // ê²€ìƒ‰ ëª©ë¡ê³¼ ë§ˆì»¤ë¥¼ í‘œì¶œí•©ë‹ˆë‹¤
                displayPlaces(data);

                // í˜ì´ì§€ ë²ˆí˜¸ë¥¼ í‘œì¶œí•©ë‹ˆë‹¤
                displayPagination(pagination);
                $('#searchPlaceModal').modal('show');
            } else if (status === kakao.maps.services.Status.ZERO_RESULT) {

//                alert('ê²€ìƒ‰ ê²°ê³¼ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ ë” ë„“ì€ ì£¼ì†Œë¡œ ì°¾ìŠµë‹ˆë‹¤.');
//                var keyword = document.getElementById('keyword');
//                var keywordArr = keyword.value.split(' ');
//
//                console.info(keywordArr);
//                var str = "";
//
//                for (var i = 0; i < keywordArr.length - 1; i++) {
//                    str += keywordArr[i] + " ";
//                }
//
//
//
//                //console.info(str);
//                keyword.value = str;
//                ps.keywordSearch(keyword.value, placesSearchByAddressCB);
                return;

            } else if (status === kakao.maps.services.Status.ERROR) {

                alert('ê²€ìƒ‰ ê²°ê³¼ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                return;

            }
        }








        // ê²€ìƒ‰ ê²°ê³¼ ëª©ë¡ê³¼ ë§ˆì»¤ë¥¼ í‘œì¶œí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
        function displayPlaces(places) {

            var listEl = document.getElementById('placesList'),
                menuEl = document.getElementById('menu_wrap'),
                fragment = document.createDocumentFragment(),
                bounds = new kakao.maps.LatLngBounds(),
                listStr = '';


            // ê²€ìƒ‰ ê²°ê³¼ ëª©ë¡ì— ì¶”ê°€ëœ í•­ëª©ë“¤ì„ ì œê±°í•©ë‹ˆë‹¤
            removeAllChildNods(listEl);

            // ì§€ë„ì— í‘œì‹œë˜ê³  ìˆëŠ” ë§ˆì»¤ë¥¼ ì œê±°í•©ë‹ˆë‹¤
            removeMarker();

            for (var i = 0; i < places.length; i++) {

                // ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ì§€ë„ì— í‘œì‹œí•©ë‹ˆë‹¤
                var placePosition = new kakao.maps.LatLng(places[i].y, places[i].x),
                    marker = addMarker(placePosition, i),
                    itemEl = getListItem(i, places[i]); // ê²€ìƒ‰ ê²°ê³¼ í•­ëª© Elementë¥¼ ìƒì„±í•©ë‹ˆë‹¤

                // ê²€ìƒ‰ëœ ì¥ì†Œ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì§€ë„ ë²”ìœ„ë¥¼ ì¬ì„¤ì •í•˜ê¸°ìœ„í•´
                // LatLngBounds ê°ì²´ì— ì¢Œí‘œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤
                bounds.extend(placePosition);

                // ë§ˆì»¤ì™€ ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì— mouseover í–ˆì„ë•Œ
                // í•´ë‹¹ ì¥ì†Œì— ì¸í¬ìœˆë„ìš°ì— ì¥ì†Œëª…ì„ í‘œì‹œí•©ë‹ˆë‹¤
                // mouseout í–ˆì„ ë•ŒëŠ” ì¸í¬ìœˆë„ìš°ë¥¼ ë‹«ìŠµë‹ˆë‹¤
                (function(marker, place) {
                    kakao.maps.event.addListener(marker, 'click', function() {
                        displayInfowindow(marker, place);
                    });

                    itemEl.onmouseover = function() {
                        displayInfowindow(marker, place);
                    };

                    itemEl.onmouseclick = function() {
                        displayInfowindow(marker, place);
                        $('#searchPlaceModal').modal('hide');

                    };

                })(marker, places[i]);

                fragment.appendChild(itemEl);
            }

            // ê²€ìƒ‰ê²°ê³¼ í•­ëª©ë“¤ì„ ê²€ìƒ‰ê²°ê³¼ ëª©ë¡ Elemnetì— ì¶”ê°€í•©ë‹ˆë‹¤
            listEl.appendChild(fragment);
            menuEl.scrollTop = 0;

            // ê²€ìƒ‰ëœ ì¥ì†Œ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì§€ë„ ë²”ìœ„ë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤
            //map.setBounds(bounds);
            drawingMap.setBounds(bounds);
        }

        class Place {
            constructor(place_name, road_address_name, address_name, phone, place_url, x, y) {
                this.place_name = place_name;
                this.road_address_name = road_address_name;
                this.address_name = address_name;
                this.phone = phone;
                this.place_url = place_url;
                this.x = x;
                this.y = y;
            }
            setRoute(place_name, road_address_name, address_name, phone, place_url, x, y) {

                this.place_name = place_name;
                this.road_address_name = road_address_name;
                this.address_name = address_name;
                this.phone = phone;
                this.place_url = place_url;
                this.x = x;
                this.y = y;
            }
        }

        var CurPlaceList = Array();



        // ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì„ Elementë¡œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
        function getListItem(index, places) {

            var el = document.createElement('li'),
                itemStr = '<span class="markerbg marker_' + (index + 1) + '"></span>' +
                '<div class="info">' +
                '   <h5 data-dismiss="modal">' + places.place_name + '</h5>';

            if (places.road_address_name) {
                itemStr += '    <span data-dismiss="modal">' + places.road_address_name + '</span>' +
                    '   <span class="jibun gray" data-dismiss="modal">' + places.address_name + '</span>';
            } else {
                itemStr += '    <span data-dismiss="modal">' + places.address_name + '</span>';
            }

            itemStr += '  <span class="tel">' + places.phone + '</span>' +
                '</div>';

            el.innerHTML = itemStr;
            el.className = 'item';

            return el;
        }

        // ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ì§€ë„ ìœ„ì— ë§ˆì»¤ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
        function addMarker(position, idx, title) {
            var imageSrc = 'http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png', // ë§ˆì»¤ ì´ë¯¸ì§€ url, ìŠ¤í”„ë¼ì´íŠ¸ ì´ë¯¸ì§€ë¥¼ ì”ë‹ˆë‹¤
                imageSize = new kakao.maps.Size(36, 37), // ë§ˆì»¤ ì´ë¯¸ì§€ì˜ í¬ê¸°
                imgOptions = {
                    spriteSize: new kakao.maps.Size(36, 691), // ìŠ¤í”„ë¼ì´íŠ¸ ì´ë¯¸ì§€ì˜ í¬ê¸°
                    spriteOrigin: new kakao.maps.Point(0, (idx * 46) + 10), // ìŠ¤í”„ë¼ì´íŠ¸ ì´ë¯¸ì§€ ì¤‘ ì‚¬ìš©í•  ì˜ì—­ì˜ ì¢Œìƒë‹¨ ì¢Œí‘œ
                    offset: new kakao.maps.Point(13, 37) // ë§ˆì»¤ ì¢Œí‘œì— ì¼ì¹˜ì‹œí‚¬ ì´ë¯¸ì§€ ë‚´ì—ì„œì˜ ì¢Œí‘œ
                },
                markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),
                marker = new kakao.maps.Marker({
                    position: position, // ë§ˆì»¤ì˜ ìœ„ì¹˜
                    image: markerImage
                });

            marker.setMap(drawingMap); // ì§€ë„ ìœ„ì— ë§ˆì»¤ë¥¼ í‘œì¶œí•©ë‹ˆë‹¤
            find_AroundMarkers.push(marker); // ë°°ì—´ì— ìƒì„±ëœ ë§ˆì»¤ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤

            return marker;
        }

        // ì§€ë„ ìœ„ì— í‘œì‹œë˜ê³  ìˆëŠ” ë§ˆì»¤ë¥¼ ëª¨ë‘ ì œê±°í•©ë‹ˆë‹¤
        function removeMarker() {
            for (var i = 0; i < find_AroundMarkers.length; i++) {
                find_AroundMarkers[i].setMap(null);
            }
            find_AroundMarkers = [];
        }

        // ê²€ìƒ‰ê²°ê³¼ ëª©ë¡ í•˜ë‹¨ì— í˜ì´ì§€ë²ˆí˜¸ë¥¼ í‘œì‹œëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
        function displayPagination(pagination) {
            var paginationEl = document.getElementById('pagination'),
                fragment = document.createDocumentFragment(),
                i;

            // ê¸°ì¡´ì— ì¶”ê°€ëœ í˜ì´ì§€ë²ˆí˜¸ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤
            while (paginationEl.hasChildNodes()) {
                paginationEl.removeChild(paginationEl.lastChild);
            }

            for (i = 1; i <= pagination.last; i++) {
                var el = document.createElement('a');
                el.href = "#";
                el.innerHTML = i;

                if (i === pagination.current) {
                    el.className = 'on';
                } else {
                    el.onclick = (function(i) {
                        return function() {
                            pagination.gotoPage(i);
                        }
                    })(i);
                }

                fragment.appendChild(el);
            }
            paginationEl.appendChild(fragment);
        }

        // ê²€ìƒ‰ê²°ê³¼ ëª©ë¡ ë˜ëŠ” ë§ˆì»¤ë¥¼ í´ë¦­í–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
        // ì¸í¬ìœˆë„ìš°ì— ì¥ì†Œëª…ì„ í‘œì‹œí•©ë‹ˆë‹¤
        function displayInfowindow(marker, place) {

            var content =
                '<div class="card card-cus" style="width:300px;">' +
                '<div class="card-header">' +
                '<div class="card-title">' +
                place.place_name +
                '</div>' +
                '<div class="card-close">' +
                '<div class="closeBtn" onclick="closeOverlay()">' +
                '<span >Ã—</span>' +
                '</div>' +
                '</div>' +
                '</div>' +
                '<div class="card-body">' +
                '<blockquote class="blockquote mb-0">';
            if (place.road_address_name != null) {
                content += '<li class="card-body-li">' + place.road_address_name + '</li>';
            }
            if (place.address_name != null) {
                content += '<li class="card-body-li">' + place.address_name + '</li>';
            }
            if (place.phone != null) {
                content += '<li class="card-body-li">' + place.phone + '</li>';
            }
            if (place.place_url != null) {
                content += '<li class="card-body-li" style="padding: 15px 0;"><a href="' + place.place_url + '" target="_blank" style="text-decoration: none;">ìƒì„¸í˜ì´ì§€</a></li>';
            }
            content +=
                '</blockquote>' +
                '<div class="card-addBtn" onclick=\'pushTravelRouteItem("' + place.place_name + '","' + place.road_address_name + '","' + place.address_name + '","' + place.phone + '","' + place.place_url + '","' + place.x + '","' + place.y + '")\'>ì¶”ê°€</div>' +
                '</div>' +
                '</div>';

            //console.info(place);


            //            var content =
            //                '<div class="card">' +
            //                '<div class="card-header">' +
            //                place.place_name +
            //                '<div class="btn btn-link" onclick="closeOverlay()" title="ë‹«ê¸°" style="float: right">X</div>' +
            //                '</div>' +
            //                '<blockquote class="blockquote mb-0">';
            //
            //            if (place.road_address_name != null) {
            //                content += '<li class="card-body-li">' + place.road_address_name + '</li>';
            //            }
            //            if (place.address_name != null) {
            //                content += '<li class="card-body-li">' + place.address_name + '</li>';
            //            }
            //            if (place.phone != null) {
            //                content += '<li class="card-body-li">' + place.phone + '</li>';
            //            }
            //            if (place.place_url != null) {
            //                content += '<li class="card-body-li"><a href="' + place.place_url + '" target="_blank" class="link">ìƒì„¸í˜ì´ì§€</a></li>';
            //            }
            //            content +=
            //                '<div class="btn btn-secondary" onclick=\'pushTravelRouteItem("' + place.place_name + '","' + place.road_address_name + '","' + place.ddress_name + '","' + place.phone + '","' + place.place_url + '","' + place.x + '","' + place.y + '")\'>ì—¬í–‰ê²½ë¡œì— ì¶”ê°€</div>' +
            //                '</blockquote>' +
            //                '</div>';

            infowindow.setContent(content);
            infowindow.open(drawingMap, marker);
        }
        // ëª¨ë“  ì¸í¬ìœˆë„ìš° ë‹«ìŒ
        function closeOverlay() {
            infowindow.close();
        }


        // ê²€ìƒ‰ê²°ê³¼ ëª©ë¡ì˜ ìì‹ Elementë¥¼ ì œê±°í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
        function removeAllChildNods(el) {
            while (el.hasChildNodes()) {
                el.removeChild(el.lastChild);
            }
        }

        //------------------------------------
        //----------TravelRouteItem and travelRouteList Start
        //------------------------------------
            var TravelOrder = 0;
        class TravelRouteItem {
            constructor(place_name, road_address_name, address_name, phone, place_url, x, y) {
                this.place_name = place_name;
                this.road_address_name = road_address_name;
                this.address_name = address_name;
                this.phone = phone;
                this.place_url = place_url;
                this.x = x;
                this.y = y;
                this.info = "";
                this.order = TravelOrder;
                TravelOrder++;
            }
            setRoute(place_name, road_address_name, address_name, phone, place_url, x, y) {

                this.place_name = place_name;
                this.road_address_name = road_address_name;
                this.address_name = address_name;
                this.phone = phone;
                this.place_url = place_url;
                this.x = x;
                this.y = y;

            }
            setName(place_name) {
                this.place_name = place_name;
            }
            setInfo(info) {
                this.info = info;
            }

        }

        var TravelRouteList = Array();

        function refreashTravelRoute() {

            var travelRouteUl = document.getElementById('travelRoute'),
                trBody = document.getElementById('trBody'),
                fragment = document.createDocumentFragment(),
                itemList = '',
                el;

            ;

            // costBody ëª¨ë“  ìì‹ ë…¸ë“œ ì‚­ì œ
            while (travelRouteUl.hasChildNodes()) {
                travelRouteUl.removeChild(travelRouteUl.firstChild);
            }
            TravelRouteList.forEach(function(currentValue, index) {

                ////console.info(index);
                ////console.info(currentValue);
                el = document.createElement('li'),
                    itemStr =

                    '<div class="travelRouteItem-header">' +
                    ' <div class="form-group">' +
                    ' <table>' +
                    ' <tr>' +
                    ' <td>' +
                    ' <input id="addTravelRoute_place_name_' + index + '" class="form-control form-control-sm" type="text" placeholder="ì¥ì†Œ ì´ë¦„" value="' + currentValue.place_name + '" style="width:130px;" />' +
                    ' </td>' +
                    ' <td>' +
                    ' <div class="btn btn-secondary btn-sm" onclick="setTravelRouteItemName(' + index + ')">ì´ë¦„ë³€ê²½</div>' +
                    ' </td>' +
                    ' <td>' +
                    ' <div class="btn btn-danger btn-sm" onclick="removeTravelRouteItem(' + index + ')"> x </div>' +
                    ' </td>' +
                    ' </tr>' +
                    '</table>' +
                    ' </div>' +
                    '</div>' +
                    ' <div>' +
                    '<table>' +
                    '<tr>' +
                    '<td>' +
                    ' <textarea id="addTravelRoute_info_' + index + '" class="form-control form-control-sm" type="text" placeholder="ì„¤ëª…" rows="3" >' + currentValue.info + '</textarea>' +
                    '</td>' +
                    '<td style="vertical-align:top">' +
                    ' <div class="btn btn-secondary btn-sm" onclick="setTravelRouteItemInfo(' + index + ')" >ì„¤ëª…ì €ì¥</div>' +
                    '</td>' +
                    '</tr>' +
                    '</table>';

                if (currentValue.address_name != "" && currentValue.address_name != "undefined") {
                    itemStr += currentValue.address_name + '<br/>';

                }
                if (currentValue.road_address_name != "" && currentValue.road_address_name != "undefined") {
                    itemStr += currentValue.road_address_name + '<br/>';

                }
                if (currentValue.phone != "" && currentValue.phone != "undefined") {
                    itemStr += currentValue.phone + '<br/>';

                }
                itemStr += '<a class="btn btn-primary btn-sm" href="' + currentValue.place_url + '" target="_blank">ìƒì„¸í˜ì´ì§€</a>';




                itemStr += '</div>';
                el.innerHTML = itemStr;
                el.setAttribute("draggable", 'true');
                el.setAttribute("class", "travelPoint");
                el.setAttribute("id", "travelPoint_" + index);



                var itemEl = el;

                fragment.appendChild(itemEl);

                travelRouteUl.appendChild(fragment);



            });

            var trBodyStr = 'ë°©ë¬¸ : ' + TravelRouteList.length;
            ////console.info(trBody);
            trBody.innerHTML = trBodyStr;


            dragAndDropAction();

        }

        function pushTravelRouteItem(place_name, road_address_name, address_name, phone, place_url, x, y) {

            TravelRouteList.push(new TravelRouteItem(place_name, road_address_name, address_name, phone, place_url, x, y));
            addCostItemParent(place_name);
            refreashTravelRoute();
            closeOverlay();
            closeCusOverlay();

        }

  

        function removeTravelRouteItem(index) {
            var removingOrder = TravelRouteList[index].order;
            checkMarkerNRemove(removingOrder);  
            
            TravelRouteList.splice(index, 1);
            removeCostItemParent(index);            
            refreashTravelRoute();



        }
        
        // mangerì˜ ë§ˆì»¤ì˜ orderì˜ ê°’ì„ ë¹„êµí•˜ì—¬ ì‚­ì œ 
        
        function checkMarkerNRemove(order){
            var markers = manager.getOverlays([kakao.maps.drawing.OverlayType.MARKER]);
            markers.marker.forEach(function(value,idx,arr){ 
                if(value._order == order){
                    manager.remove(value);
                }
            });
        }




        function setTravelRouteItem(index, place_name, road_address_name, address_name, phone, place_url, x, y) {


            TravelRouteList[index].setRoute(place_name, road_address_name, address_name, phone, place_url, x, y);
            refreashTravelRoute();
        }

        function setTravelRouteItemName(index) {

            var addTravelRoute_place_nameId = "addTravelRoute_place_name_" + index;
            var place_name = document.getElementById(addTravelRoute_place_nameId).value;
            TravelRouteList[index].setName(place_name);
            refreashTravelRoute();

            setCostItemParentName(index);
        }

        function setTravelRouteItemInfo(index) {

            var addTravelRoute_infoId = "addTravelRoute_info_" + index;
            var info = document.getElementById(addTravelRoute_infoId).value;
            TravelRouteList[index].setInfo(info);
            refreashTravelRoute();

            setCostItemParentName(index);
        }




        function swapTravelRouteItem(fIndex, sIndex) {
            var tmp = TravelRouteList[fIndex];
            TravelRouteList[fIndex] = TravelRouteList[sIndex];
            TravelRouteList[sIndex] = tmp;
            refreashTravelRoute();
        }



        //------------------------------------
        //----------TravelRouteItem and travelRouteList END
        //------------------------------------

        //------------------------------------
        //----------CostItems and CostItemList Start
        //------------------------------------
        class CostItem {
            constructor(place_name) {
                this.itemList = Array();
                this.place_name = place_name;
            }
            setPlace_name(place_name) {
                this.place_name = place_name;
            }
            pushItem(costType, cost, info) {
                this.itemList.push({
                    costType,
                    cost,
                    info
                });
            }
            popItem() {
                this.itemList.pop();
            }
        }

        var CostItemList = Array();



        function button() {

        }


        function refreashCostItem() {

            var costBody = document.getElementById('costBody'),
                costHeader = document.getElementById('costHeader'),
                fragment = document.createDocumentFragment(),
                headerFragment = document.createDocumentFragment(),
                itemList = '',
                el, headerEl, totalCost = 0,
                pindexTmp;

            ;

            // costBody ëª¨ë“  ìì‹ ë…¸ë“œ ì‚­ì œ
            while (costBody.hasChildNodes()) {
                costBody.removeChild(costBody.firstChild);
            }
            CostItemList.forEach(function(currentValue, pindex) {
                pindexTmp = pindex;
                ////console.info(pindex);
                ////console.info(currentValue);
                el = document.createElement('div'),
                    itemStr =

                    '<div class="costItem-header">' +
                    '         <span># ' + currentValue.place_name + '</span>' +
                    '</div>' +
                    '   <div class="costItem-body">' +
                    '       <ul>';

                currentValue.itemList.forEach(function(currentValue, index) {
                    itemStr += '<li>' + currentValue.costType +
                        '               <div class="btn btn-sm btn-warning" onclick="removeCostItemChild(' + pindex + ',' + index + ')">x</div>' +
                        '<br/>' +
                        setComa(currentValue.cost) + ' (' + currentValue.info + ')' + '</li>';
                    totalCost += parseInt(currentValue.cost);
                });

                itemStr +=
                    '<li>' +
                    '   <div class="btn btn-secondary btn-sm" data-toggle="collapse" data-target="#collapseAddCost_' + pindex + '" aria-expanded="false" aria-controls="collapseAddCost_' + pindex + '">ê²½ë¹„ì¶”ê°€</div>' +
                    '   <div class="collapse" id="collapseAddCost_' + pindex + '">' +
                    '       <select id="addCost_costType_' + pindex + '" class="form-control form-control-sm">' +
                    '           <option value="ì‹ë¹„">ì‹ë¹„</option>' +
                    '           <option value="êµí†µë¹„">êµí†µë¹„</option>' +
                    '           <option value="ìˆ™ë°•ë¹„">ìˆ™ë°•ë¹„</option>' +
                    '           <option value="ê¸°íƒ€">ê¸°íƒ€</option>' +
                    '       </select>' +
                    '       <input id="addCost_cost_' + pindex + '" class="form-control form-control-sm" type="number" placeholder="ë¹„ìš©">' +
                    '       <input id="addCost_info_' + pindex + '" class="form-control form-control-sm" type="text" placeholder="ë¹„ìš© ì„¤ëª…">' +
                    '       <div class="btn btn-secondary btn-sm" onclick="pushCostItemChild(' + pindex + ')">+</div>' +
                    //'       <div class="btn btn-secondary btn-sm" onclick="popCostItemChild(' + pindex + ')">-</div>' +

                    '</div>' +
                    '</li>' +
                    '   </ul>' +
                    '</div>' +
                    '</div>';
                el.innerHTML = itemStr;
                //            el.setAttribute("draggable", 'true');
                //            el.setAttribute("id", "travelPoint");
                el.setAttribute("class", "costItem");


                var itemEl = el;

                fragment.appendChild(itemEl);

                costBody.appendChild(fragment);



            });

            // ë‚˜ì¤‘ì— ì§€ë„ì˜ travelrouteì—ì„œ ì¶”ê°€í•  ë²„íŠ¼
            //el = document.createElement('div'),
            //    itemStr =

            //    '<div class="btn btn-secondary btn-sm" onclick="addCostItemParent(' + pindexTmp + ')">+</div>';

            //el.innerHTML = itemStr;
            ////            el.setAttribute("draggable", 'true');
            ////            el.setAttribute("id", "travelPoint");
            //el.setAttribute("class", "costItem");


            //var itemEl = el;

            //fragment.appendChild(itemEl);

            //costBody.appendChild(fragment);

            ////--------------------



            var headerStr =
                '<span class="chTitle">ì „ì²´ ê²½ë¹„</span>' +
                '<span class="chBody">ğŸ’° ' + setComa(totalCost) + '</span>';
            costHeader.innerHTML = headerStr;




        }

        function pushCostItemChild(index) {

            var costTypeId = "addCost_costType_" + index,
                costId = "addCost_cost_" + index,
                infoId = "addCost_info_" + index;

            var costType = document.getElementById(costTypeId);
            cost = document.getElementById(costId),
                info = document.getElementById(infoId);

            if (cost.value == "") {

                alert("ë¹„ìš©ì„ ì…ë ¥í•˜ì„¸ìš”");
            } else {

                CostItemList[index].pushItem(costType.options[costType.selectedIndex].value, cost.value, info.value);
                refreashCostItem();
            }



        }


        function popCostItemChild(index) {

            var costTypeId = "addCost_costType_" + index,
                costId = "addCost_cost_" + index,
                infoId = "addCost_info_" + index;

            var costType = document.getElementById(costTypeId);
            cost = document.getElementById(costId),
                info = document.getElementById(infoId);

            CostItemList[index].popItem();
            refreashCostItem();

        }




        function addCostItemParent(place_name) {
            CostItemList.push(new CostItem(place_name));
            refreashCostItem();

        }

        function setCostItemParentName(pindex) {

            //var addCost_place_nameId = "addCost_place_name_" + pindex;
            //var addCost_place_name = document.getElementById(addCost_place_nameId);
            var addTravelRoute_place_nameId = "addTravelRoute_place_name_" + pindex;
            var place_name = document.getElementById(addTravelRoute_place_nameId).value;

            CostItemList[pindex].setPlace_name(place_name);
            refreashCostItem();
        }

        function removeCostItemChild(pindex, index) {
            CostItemList[pindex].itemList.splice(index, 1);
            refreashCostItem();
        }


        function removeCostItemParent(pindex) {
            CostItemList.splice(pindex, 1);
            refreashCostItem();
        }

        function swapCostItemParent(fIndex, sIndex) {
            var tmp = CostItemList[fIndex];
            CostItemList[fIndex] = CostItemList[sIndex];
            CostItemList[sIndex] = tmp;
            refreashCostItem();
        }

        function setComa(number) {
            var resultStr = "";
            var strNumber = String(number);
            ////console.info(strNumber);
            ////console.info(strNumber.length);
            for (var i = strNumber.length - 1; i >= 0; i--) {
                ////console.info(i);

                if ((strNumber.length - i - 1) % 3 == 0 && i != strNumber.length - 1) {
                    resultStr = ',' + resultStr;
                }
                resultStr = strNumber[i] + resultStr;
            }


            return resultStr;

        }

        //------------------------------------
        //----------CostItems and CostItemList End
        //------------------------------------



    </script>

</body></html>
